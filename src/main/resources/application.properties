# Datasource Configuration for Oracle Autonomous Database
# =========================================================
# Configure credentials in .env file (copy from .env.example)
# Database kind
quarkus.datasource.db-kind=oracle
# Database credentials (loaded from environment variables)
# To configure: cp .env.example .env and edit with your values
quarkus.datasource.username=${DB_USERNAME}
# quarkus.datasource.password=${DB_PASSWORD} # Removed to use CredentialsProvider

# Enable OCI Vault Credentials Provider
quarkus.datasource.credentials-provider=oci-vault-provider

# OCI Vault Configuration

oci.secret.ocid=${OCI_SECRET_OCID}

oci.auth.instance-principal=${OCI_INSTANCE_PRINCIPAL:false}



# Oracle Connection String for ATP
# The service name comes from tnsnames.ora in the Wallet
# TNS_ADMIN points to the directory containing the Wallet files
quarkus.datasource.jdbc.url=jdbc:oracle:thin:@${DB_SERVICE_NAME}?TNS_ADMIN=${DB_WALLET_PATH}
# Connection Pool Configuration
quarkus.datasource.jdbc.min-size=2
quarkus.datasource.jdbc.max-size=10
# Hibernate ORM Configuration
# ============================
# JSON Mapping Conflict Resolution
# Prevents Hibernate from using REST-optimized Jackson settings for DB columns
quarkus.hibernate-orm.mapping.format.global=ignore
# Flyway Configuration
quarkus.flyway.migrate-at-start=true
quarkus.flyway.baseline-on-migrate=true
quarkus.flyway.baseline-version=1.0.0
# Log all SQL statements (useful for debugging)
quarkus.hibernate-orm.log.sql=true
# Log SQL bind parameters
quarkus.hibernate-orm.log.bind-parameters=true
# Don't load initial SQL script
quarkus.hibernate-orm.sql-load-script=no-file
# Naming Strategy: Automatically converts camelCase to snake_case in the database
quarkus.hibernate-orm.physical-naming-strategy=org.hibernate.boot.model.naming.CamelCaseToUnderscoresNamingStrategy
# Health Check Configuration
# ===========================
# Always include the Health UI (useful for development)
quarkus.smallrye-health.ui.always-include=true
# Application Configuration
# ==========================
quarkus.application.name=Quarkus OCI FreeStack
# HTTP Configuration
# ==================
quarkus.http.port=8080
# Enable CORS for development (disable in production!)
quarkus.http.cors.enabled=true
quarkus.http.cors.origins=*
# Logging Configuration
# ======================
quarkus.log.level=INFO
quarkus.log.category."com.freestack".level=DEBUG
# Console log format
quarkus.log.console.format=%d{HH:mm:ss} %-5p [%c{2.}] (%t) %s%e%n
# Dev Services (disable Oracle DevService since we're using real ATP)
# =====================================================================
quarkus.datasource.devservices.enabled=false
